{% comment %}
  FAQ Section - Influence Theme
  Displays frequently asked questions in a grid layout
{% endcomment %}

{%- liquid
  assign columns_desktop = section.settings.columns_desktop
  assign columns_mobile = section.settings.columns_mobile
-%}

<section class="faq section section--{{ section.settings.padding }} {% render 'color-scheme', scheme: section.settings.color_scheme %}">
  <div class="container">
    {%- if section.settings.subheading != blank or section.settings.heading != blank or section.settings.text != blank -%}
      <div class="faq__header text-{{ section.settings.text_alignment }}">
        {%- if section.settings.subheading != blank -%}
          <p class="faq__subheading subheading">{{ section.settings.subheading }}</p>
        {%- endif -%}
        {%- if section.settings.heading != blank -%}
          <h2 class="faq__heading {{ section.settings.heading_size }}">
            {{ section.settings.heading }}
          </h2>
        {%- endif -%}
        {%- if section.settings.text != blank -%}
          <div class="faq__text rte">
            {{ section.settings.text }}
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- if section.blocks.size > 0 -%}
      <div
        class="faq__grid"
        style="--faq-columns-desktop: {{ columns_desktop }}; --faq-columns-mobile: {{ columns_mobile }};"
      >
        {%- for block in section.blocks -%}
          <div class="faq__item" {{ block.shopify_attributes }}>
            <h3 class="faq__question">{{ block.settings.question }}</h3>
            <div class="faq__answer rte">
              {{ block.settings.answer }}
            </div>
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}
  </div>
</section>

{% stylesheet %}
  .faq__header {
    margin-bottom: var(--space-8);
  }

  .faq__header.text-center {
    text-align: center;
  }

  .faq__header.text-left {
    text-align: left;
  }

  .faq__subheading {
    margin-bottom: var(--space-2);
  }

  .faq__heading {
    margin-bottom: var(--space-3);
  }

  .faq__text {
    max-width: 40rem;
  }

  .faq__header.text-center .faq__text {
    margin-inline: auto;
  }

  /* Grid layout */
  .faq__grid {
    display: grid;
    grid-template-columns: repeat(var(--faq-columns-mobile, 1), 1fr);
    border-top: 1px solid var(--color-border);
    border-left: 1px solid var(--color-border);
  }

  @media (min-width: 750px) {
    .faq__grid {
      grid-template-columns: repeat(var(--faq-columns-desktop, 2), 1fr);
    }
  }

  /* Individual FAQ items */
  .faq__item {
    padding: var(--space-6);
    border-right: 1px solid var(--color-border);
    border-bottom: 1px solid var(--color-border);
  }

  .faq__question {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    line-height: var(--line-height-tight);
    margin-bottom: var(--space-3);
  }

  .faq__answer {
    opacity: 0.7;
    font-size: var(--font-size-sm);
    line-height: var(--line-height-relaxed);
  }

  .faq__answer p:last-child {
    margin-bottom: 0;
  }

  /* Section padding variants */
  .faq.section--none {
    padding-block: 0;
  }

  .faq.section--small {
    padding-block: var(--section-spacing-sm);
  }

  .faq.section--medium {
    padding-block: var(--section-spacing-md);
  }

  .faq.section--large {
    padding-block: var(--section-spacing-lg);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.faq.name",
  "tag": "section",
  "class": "section-faq",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "t:labels.subheading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:labels.heading",
      "default": "Frequently asked questions"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "t:labels.heading_size",
      "options": [
        { "value": "h3", "label": "t:options.heading_size.small" },
        { "value": "h2", "label": "t:options.heading_size.medium" },
        { "value": "h1", "label": "t:options.heading_size.large" }
      ],
      "default": "h2"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "t:labels.text"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "t:labels.text_alignment",
      "options": [
        { "value": "left", "label": "t:options.alignment.left" },
        { "value": "center", "label": "t:options.alignment.center" }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "t:labels.layout"
    },
    {
      "type": "select",
      "id": "columns_desktop",
      "label": "t:labels.columns_desktop",
      "options": [
        { "value": "1", "label": "1" },
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" }
      ],
      "default": "2"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "t:labels.columns_mobile",
      "options": [
        { "value": "1", "label": "1" }
      ],
      "default": "1"
    },
    {
      "type": "header",
      "content": "t:labels.section"
    },
    {
      "type": "select",
      "id": "padding",
      "label": "t:labels.padding",
      "options": [
        { "value": "none", "label": "t:options.padding.none" },
        { "value": "small", "label": "t:options.padding.small" },
        { "value": "medium", "label": "t:options.padding.medium" },
        { "value": "large", "label": "t:options.padding.large" }
      ],
      "default": "medium"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:labels.color_scheme",
      "default": "scheme_1"
    }
  ],
  "blocks": [
    {
      "type": "question",
      "name": "t:blocks.question.name",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "t:blocks.question.settings.question.label",
          "default": "What is your shipping policy?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "t:blocks.question.settings.answer.label",
          "default": "<p>We offer free standard shipping on all orders over $100. Orders are typically processed within 1-2 business days and delivered within 5-7 business days.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.faq.name",
      "blocks": [
        {
          "type": "question",
          "settings": {
            "question": "What is your shipping policy?",
            "answer": "<p>We offer free standard shipping on all orders over $100. Orders are typically processed within 1-2 business days and delivered within 5-7 business days.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "What is your return policy?",
            "answer": "<p>We accept returns within 30 days of purchase. Items must be unworn, unwashed, and in their original packaging with all tags attached.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "How can I track my order?",
            "answer": "<p>Once your order ships, you'll receive an email with tracking information. You can also track your order by logging into your account.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "Do you offer international shipping?",
            "answer": "<p>Yes, we ship to over 50 countries worldwide. International shipping rates and delivery times vary by location.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
