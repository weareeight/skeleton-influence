{% comment %}
  Social Share Snippet - Elle Theme
  Displays share buttons for products/articles

  Usage:
  {% render 'social-share', share_title: product.title, share_url: product.url %}
  {% render 'social-share', share_title: article.title, share_url: article.url, share_image: article.image %}

  Parameters:
  - share_title: Title to share
  - share_url: URL to share (relative path)
  - share_image: (optional) Image for Pinterest
  - show_facebook: (optional) Show Facebook button
  - show_twitter: (optional) Show Twitter/X button
  - show_pinterest: (optional) Show Pinterest button
  - show_email: (optional) Show Email button
{% endcomment %}

{%- liquid
  assign share_url = share_url | default: request.path
  assign full_url = share_url | prepend: request.origin
  assign encoded_url = full_url | url_encode
  assign encoded_title = share_title | default: page_title | url_encode

  # Use passed parameters if provided, otherwise fall back to global theme settings
  if show_facebook == nil
    assign show_facebook = settings.share_facebook
  endif
  if show_twitter == nil
    assign show_twitter = settings.share_twitter
  endif
  if show_pinterest == nil
    assign show_pinterest = settings.share_pinterest
  endif
  if show_email == nil
    assign show_email = true
  endif
-%}

<div class="social-share">
  <span class="social-share__label subheading">{{ 'general.social.share' | t }}</span>
  <ul class="social-share__links" role="list">
    {%- comment -%} Facebook {%- endcomment -%}
    {%- if show_facebook -%}
      <li>
        <a
          href="https://www.facebook.com/sharer/sharer.php?u={{ encoded_url }}"
          target="_blank"
          rel="noopener noreferrer nofollow"
          aria-label="{{ 'accessibility.share_facebook' | t }}"
          class="social-share__link"
        >
          {% render 'icon', icon: 'facebook' %}
        </a>
      </li>
    {%- endif -%}

    {%- comment -%} Twitter/X {%- endcomment -%}
    {%- if show_twitter -%}
      <li>
        <a
          href="https://twitter.com/intent/tweet?text={{ encoded_title }}&url={{ encoded_url }}"
          target="_blank"
          rel="noopener noreferrer nofollow"
          aria-label="{{ 'accessibility.share_twitter' | t }}"
          class="social-share__link"
        >
          {% render 'icon', icon: 'twitter' %}
        </a>
      </li>
    {%- endif -%}

    {%- comment -%} Pinterest {%- endcomment -%}
    {%- if show_pinterest and share_image != blank -%}
      <li>
        <a
          href="https://pinterest.com/pin/create/button/?url={{ encoded_url }}&media={{ share_image | image_url: width: 1200 | prepend: 'https:' | url_encode }}&description={{ encoded_title }}"
          target="_blank"
          rel="noopener noreferrer nofollow"
          aria-label="{{ 'accessibility.share_pinterest' | t }}"
          class="social-share__link"
        >
          {% render 'icon', icon: 'pinterest' %}
        </a>
      </li>
    {%- endif -%}

    {%- comment -%} Email {%- endcomment -%}
    {%- if show_email -%}
      <li>
        <a
          href="mailto:?subject={{ encoded_title }}&body={{ full_url }}"
          aria-label="{{ 'accessibility.share_email' | t }}"
          class="social-share__link"
        >
          {% render 'icon', icon: 'mail' %}
        </a>
      </li>
    {%- endif -%}
  </ul>
</div>

<style>
  .social-share {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-4) 0;
  }

  .social-share__label {
    margin: 0;
    font-size: var(--font-size-xs);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--color-muted);
  }

  .social-share__links {
    display: flex;
    gap: var(--space-2);
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .social-share__link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    color: var(--color-foreground);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-full);
    transition: all var(--duration-fast) var(--ease-out);
  }

  .social-share__link:hover {
    background-color: var(--color-foreground);
    color: var(--color-background);
    border-color: var(--color-foreground);
  }

  .social-share__link svg {
    width: 1rem;
    height: 1rem;
  }
</style>
