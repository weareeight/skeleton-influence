{% comment %}
  Rich Text Section - Elle Theme
  Editorial typography with flexible width options
{% endcomment %}

{%- liquid
  assign content_alignment = section.settings.content_alignment
  assign text_style = section.settings.text_style
  assign padding = section.settings.padding
-%}

<section class="rich-text section section--{{ padding }} {% render 'color-scheme', scheme: section.settings.color_scheme %}">
  <div class="container">
    <div class="rich-text__inner rich-text__inner--{{ text_style }} text-{{ content_alignment }}{% if section.settings.narrow_width %} rich-text__inner--narrow{% endif %}">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'subheading' -%}
            {%- if block.settings.text != blank -%}
              <p class="rich-text__subheading subheading" {{ block.shopify_attributes }}>
                {{ block.settings.text }}
              </p>
            {%- endif -%}

          {%- when 'heading' -%}
            {%- if block.settings.text != blank -%}
              <h2 class="rich-text__heading {{ block.settings.size }}" {{ block.shopify_attributes }}>
                {{ block.settings.text }}
              </h2>
            {%- endif -%}

          {%- when 'text' -%}
            {%- if block.settings.text != blank -%}
              <div
                class="rich-text__text rte"
                {{ block.shopify_attributes }}
              >
                {{ block.settings.text }}
              </div>
            {%- endif -%}

          {%- when 'button' -%}
            {%- if block.settings.label != blank -%}
              <div class="rich-text__button" {{ block.shopify_attributes }}>
                <a
                  href="{{ block.settings.link }}"
                  class="btn btn--{{ block.settings.style }}"
                >
                  {{ block.settings.label }}
                </a>
              </div>
            {%- endif -%}

          {%- when 'custom_liquid' -%}
            <div class="rich-text__custom-liquid" {{ block.shopify_attributes }}>
              {{ block.settings.liquid }}
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</section>

{% stylesheet %}
  .rich-text__inner {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
  }

  .rich-text__inner.text-center {
    align-items: center;
  }

  .rich-text__inner.text-left {
    align-items: flex-start;
  }

  /* Narrow width variant - respects alignment */
  .rich-text__inner--narrow {
    max-width: 50%;
  }

  .rich-text__inner--narrow.text-center {
    margin-inline: auto;
  }

  .rich-text__inner--narrow.text-left {
    margin-inline-start: 0;
    margin-inline-end: auto;
  }

  @media (max-width: 749px) {
    .rich-text__inner--narrow {
      max-width: 100%;
    }
  }

  .rich-text__subheading {
    margin-bottom: var(--space-2);
  }

  .rich-text__heading {
    max-width: 40rem;
  }

  .rich-text__text {
    max-width: 40rem;
  }

  /* Size variants - affect subheading, heading, and text */
  .rich-text__inner--small .rich-text__subheading {
    font-size: var(--font-size-xs);
  }
  .rich-text__inner--small .rich-text__heading {
    font-size: var(--font-size-xl);
  }
  .rich-text__inner--small .rich-text__text {
    font-size: var(--font-size-sm);
  }

  .rich-text__inner--medium .rich-text__subheading {
    font-size: var(--font-size-sm);
  }
  .rich-text__inner--medium .rich-text__heading {
    font-size: var(--font-size-3xl);
  }
  .rich-text__inner--medium .rich-text__text {
    font-size: var(--font-size-base);
  }

  .rich-text__inner--large .rich-text__subheading {
    font-size: var(--font-size-base);
  }
  .rich-text__inner--large .rich-text__heading {
    font-size: var(--font-size-4xl);
  }
  .rich-text__inner--large .rich-text__text {
    font-size: var(--font-size-lg);
  }

  .rich-text__button {
    margin-top: var(--space-4);
  }

  /* Section padding variants */
  .rich-text.section--none {
    padding-block: 0;
  }

  .rich-text.section--small {
    padding-block: var(--section-spacing-sm);
  }

  .rich-text.section--medium {
    padding-block: var(--section-spacing-md);
  }

  .rich-text.section--large {
    padding-block: var(--section-spacing-lg);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.rich_text.name",
  "class": "section-rich-text",
  "tag": "section",
  "settings": [
    {
      "type": "select",
      "id": "content_alignment",
      "label": "t:sections.rich_text.settings.content_alignment.label",
      "options": [
        { "value": "left", "label": "t:sections.rich_text.settings.content_alignment.options.left" },
        { "value": "center", "label": "t:sections.rich_text.settings.content_alignment.options.center" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "text_style",
      "label": "Text size",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" }
      ],
      "default": "medium"
    },
    {
      "type": "checkbox",
      "id": "narrow_width",
      "label": "Narrow width",
      "default": true
    },
    {
      "type": "header",
      "content": "t:labels.section"
    },
    {
      "type": "select",
      "id": "padding",
      "label": "t:labels.padding",
      "options": [
        { "value": "none", "label": "t:options.padding.none" },
        { "value": "small", "label": "t:options.padding.small" },
        { "value": "medium", "label": "t:options.padding.medium" },
        { "value": "large", "label": "t:options.padding.large" }
      ],
      "default": "medium"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.rich_text.settings.color_scheme.label",
      "default": "scheme_1"
    }
  ],
  "blocks": [
    {
      "type": "subheading",
      "name": "Subheading",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "t:labels.text",
          "default": "Subheading"
        }
      ]
    },
    {
      "type": "heading",
      "name": "t:sections.rich_text.blocks.heading.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "t:labels.heading",
          "default": "Talk about your brand"
        },
        {
          "type": "select",
          "id": "size",
          "label": "Heading size",
          "options": [
            { "value": "h2", "label": "Large" },
            { "value": "h3", "label": "Medium" },
            { "value": "h4", "label": "Small" }
          ],
          "default": "h2"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.rich_text.blocks.text.name",
      "limit": 1,
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "t:labels.text",
          "default": "<p>Share information about your brand with your customers. Describe a product, make announcements, or welcome customers to your store.</p>"
        }
      ]
    },
    {
      "type": "button",
      "name": "t:sections.rich_text.blocks.button.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "t:labels.button_label",
          "default": "Learn more"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:labels.button_link"
        },
        {
          "type": "select",
          "id": "style",
          "label": "t:labels.button_style",
          "options": [
            { "value": "filled", "label": "t:options.button_style.filled" },
            { "value": "outline", "label": "t:options.button_style.outline" },
            { "value": "underline", "label": "t:options.button_style.underline" }
          ],
          "default": "filled"
        }
      ]
    },
    {
      "type": "custom_liquid",
      "name": "t:blocks.custom_liquid.name",
      "settings": [
        {
          "type": "liquid",
          "id": "liquid",
          "label": "t:blocks.custom_liquid.settings.liquid.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.rich_text.name",
      "blocks": [
        { "type": "subheading" },
        { "type": "heading" },
        { "type": "text" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}
