{% comment %}
  Collection List Section - Elle Theme
  Displays a grid of collections for list-collections template
{% endcomment %}

{%- liquid
  assign columns_desktop = section.settings.columns_desktop
  assign columns_mobile = section.settings.columns_mobile
  assign show_collection_count = section.settings.show_collection_count
  assign image_ratio = section.settings.image_ratio
  assign page_title = 'collections.title' | t
-%}

<section class="collection-list section {% render 'color-scheme', scheme: section.settings.color_scheme %} section-padding--top-{{ section.settings.padding_top }} section-padding--bottom-{{ section.settings.padding_bottom }}">
  {% render 'page-header', title: page_title %}

  <div class="container">
    <div
      class="collection-list__grid grid"
      style="--grid-columns-desktop: {{ columns_desktop }}; --grid-columns-mobile: {{ columns_mobile }};"
    >
      {%- for collection in collections -%}
        {%- assign card_delay = forloop.index0 | modulo: columns_desktop | times: 100 -%}
        <div class="collection-list__item" data-animate="fade-up" data-animate-delay="{{ card_delay }}">
          {% render 'collection-card', collection: collection, show_count: show_collection_count, image_ratio: image_ratio %}
        </div>
      {%- endfor -%}
    </div>
  </div>
</section>

{% stylesheet %}
/* Collection List Grid */
.collection-list__grid.grid {
  display: grid;
  gap: var(--grid-gap, var(--space-6));
  grid-template-columns: repeat(var(--grid-columns-mobile, 1), 1fr);
}

@media (min-width: 750px) {
  .collection-list__grid.grid {
    grid-template-columns: repeat(var(--grid-columns-desktop, 3), 1fr);
  }
}

.collection-list__item {
  display: flex;
}

.collection-list__item > * {
  flex: 1;
  min-width: 0;
}
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.collection_list.name",
  "tag": "section",
  "class": "section-collection-list",
  "settings": [
    {
      "type": "select",
      "id": "image_ratio",
      "label": "t:labels.image_ratio",
      "options": [
        { "value": "landscape", "label": "t:options.image_ratio.landscape" },
        { "value": "portrait", "label": "t:options.image_ratio.portrait" },
        { "value": "square", "label": "t:options.image_ratio.square" }
      ],
      "default": "landscape"
    },
    {
      "type": "checkbox",
      "id": "show_collection_count",
      "label": "t:sections.collection_list.settings.show_collection_count.label",
      "default": true
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "t:labels.columns_desktop",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "t:labels.columns_mobile",
      "options": [
        { "value": "1", "label": "1" },
        { "value": "2", "label": "2" }
      ],
      "default": "1"
    },
    {
      "type": "header",
      "content": "t:labels.section"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:labels.color_scheme",
      "default": "scheme_1"
    },
    {
      "type": "select",
      "id": "padding_top",
      "label": "t:labels.padding_top",
      "options": [
        { "value": "none", "label": "t:options.padding.none" },
        { "value": "small", "label": "t:options.padding.small" },
        { "value": "medium", "label": "t:options.padding.medium" },
        { "value": "large", "label": "t:options.padding.large" }
      ],
      "default": "medium"
    },
    {
      "type": "select",
      "id": "padding_bottom",
      "label": "t:labels.padding_bottom",
      "options": [
        { "value": "none", "label": "t:options.padding.none" },
        { "value": "small", "label": "t:options.padding.small" },
        { "value": "medium", "label": "t:options.padding.medium" },
        { "value": "large", "label": "t:options.padding.large" }
      ],
      "default": "medium"
    }
  ]
}
{% endschema %}
