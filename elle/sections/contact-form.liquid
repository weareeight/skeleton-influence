{% comment %}
  Contact Form Section - Elle Theme
  Displays a contact form with customizable fields
{% endcomment %}

<section class="contact-form-section section section--{{ section.settings.padding }}{% if section.settings.show_page_header %} has-page-header{% endif %} {% render 'color-scheme', scheme: section.settings.color_scheme %}">
  {%- if section.settings.show_page_header and section.settings.heading != blank -%}
    {% render 'page-header', title: section.settings.heading %}
  {%- endif -%}

  <div class="container{% if section.settings.narrow_container %} container--narrow{% endif %}">
    <div class="contact-form-section__inner">
      {%- if section.settings.subheading != blank or section.settings.text != blank or section.settings.heading != blank and section.settings.show_page_header == false -%}
        <div class="contact-form-section__header text-{{ section.settings.text_alignment }}">
          {%- if section.settings.subheading != blank -%}
            <p class="contact-form-section__subheading subheading">
              {{ section.settings.subheading }}
            </p>
          {%- endif -%}
          {%- unless section.settings.show_page_header -%}
            {%- if section.settings.heading != blank -%}
              <h2 class="contact-form-section__heading {{ section.settings.heading_size }}">
                {{ section.settings.heading }}
              </h2>
            {%- endif -%}
          {%- endunless -%}
          {%- if section.settings.text != blank -%}
            <div class="contact-form-section__text rte">
              {{ section.settings.text }}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}

      {%- form 'contact', id: 'ContactForm', class: 'contact-form' -%}
        {%- if form.posted_successfully? -%}
          <div class="form-message form-message--success" tabindex="-1" autofocus>
            {% render 'icon', icon: 'checkmark' %}
            {{ 'contact.form.success' | t }}
          </div>
        {%- else -%}
          {%- if form.errors -%}
            <div class="form-message form-message--error" role="alert" aria-live="polite">
              {{ form.errors | default_errors }}
            </div>
          {%- endif -%}

          <div class="contact-form__fields">
            <div class="contact-form__row">
              <div class="form-group">
                <label for="ContactForm-name" class="form-label">
                  {{ 'common.name' | t }}
                  <span aria-hidden="true">*</span>
                </label>
                <input
                  type="text"
                  id="ContactForm-name"
                  name="contact[{{ 'common.name' | t }}]"
                  class="form-input"
                  autocomplete="name"
                  required
                >
              </div>

              <div class="form-group">
                <label for="ContactForm-email" class="form-label">
                  {{ 'common.email' | t }}
                  <span aria-hidden="true">*</span>
                </label>
                <input
                  type="email"
                  id="ContactForm-email"
                  name="contact[email]"
                  class="form-input"
                  autocomplete="email"
                  autocorrect="off"
                  autocapitalize="off"
                  required
                  {% if form.errors contains 'email' %}
                    aria-invalid="true"
                  {% endif %}
                >
              </div>
            </div>

            {%- if section.settings.show_phone -%}
              <div class="form-group">
                <label for="ContactForm-phone" class="form-label">
                  {{ 'common.phone' | t }}
                </label>
                <input
                  type="tel"
                  id="ContactForm-phone"
                  name="contact[{{ 'common.phone' | t }}]"
                  class="form-input"
                  autocomplete="tel"
                >
              </div>
            {%- endif -%}

            {%- if section.settings.show_subject -%}
              <div class="form-group">
                <label for="ContactForm-subject" class="form-label">
                  {{ 'contact.form.subject' | t }}
                </label>
                <input
                  type="text"
                  id="ContactForm-subject"
                  name="contact[{{ 'contact.form.subject' | t }}]"
                  class="form-input"
                >
              </div>
            {%- endif -%}

            <div class="form-group">
              <label for="ContactForm-message" class="form-label">
                {{ 'common.message' | t }}
                <span aria-hidden="true">*</span>
              </label>
              <textarea
                id="ContactForm-message"
                name="contact[{{ 'common.message' | t }}]"
                class="form-input form-textarea"
                rows="6"
                required
              ></textarea>
            </div>
          </div>

          <div class="contact-form__submit">
            <button type="submit" class="btn btn--filled{% if section.settings.full_width_button %} btn--full{% endif %}">
              {{ 'contact.form.submit' | t }}
            </button>
          </div>
        {%- endif -%}
      {%- endform -%}
    </div>
  </div>
</section>

{% stylesheet %}
  /* Header */
  .contact-form-section__header {
    margin-bottom: var(--space-8);
  }

  .contact-form-section__subheading {
    margin-bottom: var(--space-2);
  }

  .contact-form-section__heading {
    margin-bottom: var(--space-4);
  }

  .contact-form-section__text {
    max-width: 40rem;
  }

  .contact-form-section__header.text-center .contact-form-section__text {
    margin-inline: auto;
  }

  /* Form layout */
  .contact-form__fields {
    display: flex;
    flex-direction: column;
    gap: var(--space-5);
  }

  .contact-form__row {
    display: grid;
    gap: var(--space-5);
  }

  @media (min-width: 750px) {
    .contact-form__row {
      grid-template-columns: 1fr 1fr;
    }
  }

  .contact-form__submit {
    margin-top: var(--space-6);
  }

  /* Section padding variants */
  .contact-form-section.section--none {
    padding-block: 0;
  }

  .contact-form-section.section--small {
    padding-block: var(--section-spacing-sm);
  }

  .contact-form-section.section--medium {
    padding-block: var(--section-spacing-md);
  }

  .contact-form-section.section--large {
    padding-block: var(--section-spacing-lg);
  }

  /* Remove top padding when using page header */
  .contact-form-section.has-page-header {
    padding-top: 0;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:sections.contact_form.name",
  "tag": "section",
  "class": "section-contact-form",
  "settings": [
    {
      "type": "text",
      "id": "subheading",
      "label": "t:labels.subheading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:labels.heading",
      "default": "Contact us"
    },
    {
      "type": "checkbox",
      "id": "show_page_header",
      "label": "Use page header style",
      "info": "Display heading in the same style as other pages",
      "default": true
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "t:labels.heading_size",
      "options": [
        { "value": "h3", "label": "t:options.heading_size.small" },
        { "value": "h2", "label": "t:options.heading_size.medium" },
        { "value": "h1", "label": "t:options.heading_size.large" }
      ],
      "default": "h2"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "t:labels.text",
      "default": "<p>Have a question? We'd love to hear from you.</p>"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "t:labels.text_alignment",
      "options": [
        { "value": "left", "label": "t:options.alignment.left" },
        { "value": "center", "label": "t:options.alignment.center" }
      ],
      "default": "center"
    },
    {
      "type": "checkbox",
      "id": "narrow_container",
      "label": "t:sections.contact_form.settings.narrow_container.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.contact_form.settings.header_form_fields.content"
    },
    {
      "type": "checkbox",
      "id": "show_phone",
      "label": "t:sections.contact_form.settings.show_phone.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_subject",
      "label": "t:sections.contact_form.settings.show_subject.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "full_width_button",
      "label": "t:sections.contact_form.settings.full_width_button.label",
      "default": false
    },
    {
      "type": "select",
      "id": "padding",
      "label": "t:labels.padding",
      "options": [
        { "value": "none", "label": "t:options.padding.none" },
        { "value": "small", "label": "t:options.padding.small" },
        { "value": "medium", "label": "t:options.padding.medium" },
        { "value": "large", "label": "t:options.padding.large" }
      ],
      "default": "medium"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:labels.color_scheme",
      "default": "scheme_1"
    }
  ],
  "presets": [
    {
      "name": "t:sections.contact_form.name"
    }
  ]
}
{% endschema %}
